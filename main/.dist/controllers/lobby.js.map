{"version":3,"file":"lobby.js","sourceRoot":"","sources":["../../controllers/lobby.ts"],"names":[],"mappings":";;;;;;AAAA,yDAA4E;AAC5E,kFAAoD;AACpD,2DAAwD;AAEjD,KAAK,UAAU,iBAAiB,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI;IAClD,IAAI;QACA,MAAM,MAAM,GAA4B,IAAA,oCAAgB,EAAC,GAAG,CAAC,CAAC;QAC9D,IAAG,CAAC,MAAM,CAAC,OAAO,EAAE;YAChB,OAAO,IAAI,CAAC,wBAAQ,CAAC,UAAU,CAAC,kBAAkB,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QACzE,MAAM,EAAC,EAAE,EAAE,QAAQ,EAAE,QAAQ,EAAE,UAAU,EAAE,YAAY,EAAE,QAAQ,EAAC,GAAG,GAAG,CAAC,IAAI,CAAC;QAC9E,MAAM,SAAS,GAAG,MAAM,IAAA,6BAAc,EAAC,EAAE,EAAE,QAAQ,EAAE,QAAQ,EAAE,UAAU,EAAE,YAAY,EAAE,QAAQ,CAAC,CAAC;QACnG,GAAG,CAAC,MAAM,CAAC,eAAe,EAAE,SAAS,CAAC,aAAa,EAAE,EAAC,MAAM,EAAE,EAAE,GAAC,EAAE,GAAC,EAAE,GAAC,EAAE,GAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAC,CAAC,CAAC;QACjG,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;KAC1C;IAAC,OAAO,CAAC,EAAE;QACR,IAAI,CAAC,CAAC,CAAC,CAAC;KACX;AACL,CAAC;AAZD,8CAYC","sourcesContent":["import {Result, ValidationError, validationResult} from \"express-validator\";\nimport ApiError from \"../exteptions/api_exceptions\";\nimport {changeUserData} from \"../services/user_service\";\n\nexport async function changeUserDataPut(req, res, next) {\n    try {\n        const errors: Result<ValidationError> = validationResult(req);\n        if(!errors.isEmpty())\n            return next(ApiError.badRequest('Ошибка валидации', errors.array()));\n        const {id, username, password, password_d, password_old, class_id} = req.body;\n        const user_data = await changeUserData(id, username, password, password_d, password_old, class_id);\n        res.cookie('refresh_token', user_data.refresh_token, {maxAge: 30*24*60*60*1000, httpOnly: true});\n        return res.status(200).json(user_data);\n    } catch (e) {\n        next(e);\n    }\n}"]}