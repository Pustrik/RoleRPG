{"version":3,"file":"middleware_exceptions.js","sourceRoot":"","sources":["../../middleware/middleware_exceptions.ts"],"names":[],"mappings":";;;AAAA,iEAAsD;AAEtD,SAAgB,eAAe,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI;IAC/C,IAAG,GAAG,YAAY,yBAAQ,EAAE;QACxB,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,EAAG;YACvB,OAAO,EAAE,eAAe;YACxB,MAAM,EAAE,GAAG,GAAG,CAAC,MAAM,MAAM,GAAG,CAAC,GAAG,EAAE;YACpC,IAAI,kCACG,GAAG,CAAC,IAAI,KACX,SAAS,EAAE,SAAS,EACpB,SAAS,EAAE,SAAS,GACvB;YACD,GAAG;SACN,CAAC,CAAC;QACH,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,EAAC,OAAO,EAAE,GAAG,CAAC,OAAO,EAAE,MAAM,EAAE,GAAG,CAAC,MAAM,EAAC,CAAC,CAAC;KAClF;IACD,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAC,OAAO,EAAE,uBAAuB,EAAC,CAAC,CAAC;AACpE,CAAC;AAfD,0CAeC","sourcesContent":["import {ApiError} from \"../exteptions/api_exceptions\";\n\nexport function MiddlewareError(err, req, res, next) {\n    if(err instanceof ApiError) {\n        console.warn('error', '',  {\n            message: 'Error Handler',\n            action: `${req.method} : ${req.url}`,\n            body: {\n                ...req.body,\n                secretKey: undefined,\n                publicKey: undefined\n            },\n            err\n        });\n        return res.status(err.status).json({message: err.message, errors: err.errors});\n    }\n    return res.status(500).json({message: 'Непредвиденная ошибка'});\n}"]}